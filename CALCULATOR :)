
<script>
    // URL of the JSON file
    const dataJsonUrl = 'https://raw.githubusercontent.com/hthmark/BB-Test/refs/heads/main/Counties.json';

    // Fetch data when the page loads
    window.onload = async () => {
        const data = await fetchData();
        if (data) {
            populateStates(data);
        }
    };

    async function fetchData() {
        try {
            const response = await fetch(dataJsonUrl);
            if (!response.ok) {
                throw new Error('Network response was not ok: ' + response.statusText);
            }
            return await response.json();
        } catch (error) {
            console.error('Error fetching JSON:', error);
        }
    }

    function populateStates(data) {
        const stateSelect = document.getElementById('state-select');
        const states = [...new Set(data.map(item => item.State))];

        // Clear existing options
        stateSelect.innerHTML = '';
        const defaultOption = document.createElement('option');
        defaultOption.textContent = 'Select a state';
        defaultOption.disabled = true;
        defaultOption.selected = true;
        stateSelect.appendChild(defaultOption);

        // Populate states
        states.forEach(state => {
            const option = document.createElement('option');
            option.value = state;
            option.textContent = state;
            stateSelect.appendChild(option);
        });

        // Add change event listener
        stateSelect.addEventListener('change', () => {
            const selectedState = stateSelect.value;
            populateCounties(data, selectedState);
        });
    }

    function populateCounties(data, selectedState) {
        const countySelect = document.getElementById('county-select');
        const counties = [...new Set(data.filter(item => item.State === selectedState).map(item => item.County))];

        // Clear existing options
        countySelect.innerHTML = '';
        const defaultOption = document.createElement('option');
        defaultOption.textContent = 'Select a county';
        defaultOption.disabled = true;
        defaultOption.selected = true;
        countySelect.appendChild(defaultOption);

        // Populate counties
        counties.forEach(county => {
            const option = document.createElement('option');
            option.value = county;
            option.textContent = county;
            countySelect.appendChild(option);
        });

        // Add change event listener for counties
        countySelect.addEventListener('change', () => {
            const selectedCounty = countySelect.value;
            displayPopulation(data, selectedState, selectedCounty);
        });
    }

    function displayPopulation(data, selectedState, selectedCounty) {
        const populationDisplay = document.getElementById('population-display');
        const populationData = data.find(item => item.State === selectedState && item.County === selectedCounty);

        if (populationData) {
            populationDisplay.textContent = `Population: ${populationData.Population}`;
        } else {
            populationDisplay.textContent = 'Population: N/A';
        }
    }
</script>

